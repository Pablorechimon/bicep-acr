---
include:
  module:
    # Import all the Azure Well-Architected Framework rules
    - PSRule.Rules.Azure
    
configuration:
  # Enable code analysis of bicep files
  AZURE_BICEP_FILE_EXPANSION: true
  # Validate that the bicep CLI is used
  AZURE_BICEP_CHECK_TOOL: true
  
  #PSRULE_AZURE_BICEP_PATH: "%USERPROFILE%\\.bicep\\"
  #AZURE_BICEP_PARAMS_FILE_EXPANSION: false
  #AZURE_PARAMETER_FILE_EXPANSION: false

#input:
#  pathIgnore:
#    - "*.yml"
#    - "*.md"
#    - "*.github/"
#    #Include test files from modules
#    - '!**/*.bicep'
#    - '!deployment/*.bicep'  

input:
  pathIgnore:
  # Exclude bicepconfig.json
  #- 'bicepconfig.json'
  # Exclude module files
  - 'modules/**/*.bicep'
  - '../deployment/*.parameters.bicepparam'
  # Include test files from modules
  - '!deployment/*.tests.bicep'
  - '!deployment/*.main.bicep'


execution:
  # Disable warnings that files cannot be processed
  notProcessedWarning: false

output:
  as: Summary
  #culture: [ 'en-US' ]
  # Show results for rules with the Fail, Pass, or Error outcome
  #outcome: 'Processed'